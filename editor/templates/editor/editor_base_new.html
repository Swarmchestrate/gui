{% extends 'base.html' %}
{% load static %}
{% load helpers %}
{% block scripts %}
{{ toc_url|json_script:'toc_url' }}
{{ tabbed_form_url|json_script:'tabbed_form_url' }}
{{ initial_category|json_script:'initial_category' }}
<script type="module" src="{% static 'editor/editor.js' %}"></script>
<script type="module" src="{% static 'editor/one_to_one_fields.js' %}"></script>
{% for field_name, field_metadata in one_to_many_field_metadata.items %}
{% for template_name, template in field_metadata.templates.items %}
{% with template_id=field_name|add:'-'|add:template_name|add:'-form-template' %}
{{ template|json_script:template_id }}
{% endwith %}
{% endfor %}
{% endfor %}
<script type="module" src="{% static 'editor/one_to_many_fields.js' %}"></script>
{% block extra_scripts %}
{% endblock extra_scripts %}
{% endblock scripts %}

{% block content %}
<div class="editor-layout">
    <h1 class="visually-hidden">
        {{ resource_type_readable.title }} {{ resource_id }}
    </h1>
    <div class="editor-layout__content">
        {# TOC #}
        <div class="editor-layout__toc">
            {% include 'editor/placeholders/toc_placeholder.html' %}
        </div>
        {# Editor main content #}
        <div class="editor-layout__body">
            {% block editor_main_content %}
            {% include 'editor/placeholders/fields_placeholder.html' %}
            {% endblock editor_main_content %}
        </div>
    </div>
</div>
{% endblock content %}
