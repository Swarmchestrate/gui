{% load static %}
{% load helpers %}
<div class="tab-content" id="editor-tab-content">
    {% regroup form|dictsort:'field.category' by field.category as field_groups %}
    {% for category, category_data in toc_list_items.items %}
    {% with category_id_base=category.lower|kebab_case %}
    {% include 'editor/editor_tab_pane_router.html' %}
    {% endwith %}
    {% endfor %}
</div>
<div id="dialogs">
    {# One-to-one dialogs #}
    {% for field_name, field_metadata in one_to_one_field_metadata.items %}
    {# New dialogs #}
    {% url new_one_to_one_relation_reverse_base resource_id field_name as new_resource_url %}
    {% with form=field_metadata.new_form dialog_id='new-'|add:field_name|add:'-dialog' dialog_extra_classes='col-lg-10' resource_type_readable=field_metadata.type_readable %}
    {% include 'editor/dialogs/new_dialog.html' %}
    {% endwith %}
    {# Update dialogs #}
    {% url update_one_to_one_relation_reverse_base resource_id field_name as update_resource_url %}
    {% with form=field_metadata.update_form dialog_id='update-'|add:field_name|add:'-dialog' dialog_extra_classes='col-lg-10' resource_type_readable=field_metadata.type_readable %}
    {% include 'editor/dialogs/update_dialog.html' %}
    {% endwith %}
    {# Delete dialogs #}
    {% url delete_one_to_one_relation_reverse_base resource_id field_name as delete_resource_url %}
    {% with form=field_metadata.delete_form dialog_id='delete-'|add:field_name|add:'-dialog' dialog_extra_classes='col-lg-10' resource_type_readable=field_metadata.type_readable %}
    {% include 'editor/dialogs/delete_dialog.html' %}
    {% endwith %}
    {% endfor %}

    {# One-to-many dialogs #}
    {% for field_name, field_metadata in one_to_many_field_metadata.items %}
    {# New dialogs #}
    {% url new_one_to_many_relation_reverse_base resource_id field_name as new_resource_url %}
    {% with form=field_metadata.new_form dialog_id='new-'|add:field_name|add:'-dialog' dialog_extra_classes='col-lg-10' resource_type_readable=field_metadata.type_readable %}
    {% include 'editor/dialogs/new_dialog.html' %}
    {% endwith %}
    {% for resource_id, forms in field_metadata.resource_forms.items %}
    {# Update dialogs #}
    {% url update_one_to_many_relation_reverse_base resource_id field_name resource_id as update_resource_url %}
    {% with resource_id_str=resource_id|stringformat:'s' %}
    {% with form=forms.update_form dialog_id='update-'|add:field_name|add:'-'|add:resource_id_str|add:'-dialog' dialog_extra_classes='col-lg-10' resource_type_readable=field_metadata.type_readable %}
    {% include 'editor/dialogs/update_dialog.html' %}
    {% endwith %}
    {% endwith %}
    {# Delete dialogs #}
    {% url delete_one_to_many_relation_reverse_base resource_id field_name resource_id as delete_resource_url %}
    {% with resource_id_str=resource_id|stringformat:'s' resource_id=resource_id %}
    {% with form=forms.delete_form dialog_id='delete-'|add:field_name|add:'-'|add:resource_id_str|add:'-dialog' dialog_extra_classes='col-lg-10' resource_type_readable=field_metadata.type_readable %}
    {% include 'editor/dialogs/delete_dialog.html' %}
    {% endwith %}
    {% endwith %}
    {% endfor %}
    {% endfor %}
</div>
